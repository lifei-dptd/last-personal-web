<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ˜åŠ›è²çš„ä¸ªäººç½‘ç«™</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ç™»å½•æ£€æŸ¥é®ç½© -->
    <div id="loginCheckOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; padding: 2rem; border-radius: 15px; text-align: center; max-width: 400px;">
            <h3 style="margin-top: 0;">éªŒè¯ç™»å½•çŠ¶æ€</h3>
            <p>æ­£åœ¨éªŒè¯æ‚¨çš„ç™»å½•çŠ¶æ€ï¼Œè¯·ç¨å€™...</p>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">åˆ˜åŠ›è²</div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#home" class="nav-link active">é¦–é¡µ</a></li>
                <li><a href="#about" class="nav-link">å…³äºæˆ‘</a></li>
                <li><a href="#skills" class="nav-link">æŠ€èƒ½åˆ†æ</a></li>
                <li><a href="#timeline" class="nav-link">æ±‚å­¦ç»å†</a></li>
                <li><a href="#hobbies" class="nav-link">å…´è¶£çˆ±å¥½</a></li>
                <li><a href="#gallery" class="nav-link">ç…§ç‰‡å¢™</a></li>
                <li><a href="#contact" class="nav-link">è”ç³»æ–¹å¼</a></li>
                <li><a href="#guestbook" class="nav-link">ç•™è¨€æ¿</a></li>
                <li id="userMenu" style="position: relative;">
                    <a href="/login.html" id="loginLink" class="nav-link">ç™»å½•</a>
                    <div id="userDropdown" style="display: none; position: absolute; top: 100%; right: 0; background: white; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); padding: 1rem; min-width: 200px; z-index: 1000;">
                        <div id="welcomeText" style="padding: 0.5rem 0; color: var(--text-color); font-weight: 600;"></div>
                        <hr style="border: none; border-top: 1px solid #eee; margin: 0.5rem 0;">
                        <a href="javascript:void(0)" onclick="logout()" style="display: block; padding: 0.5rem 0; color: var(--text-color); text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#4A90E2'" onmouseout="this.style.color='var(--text-color)'">é€€å‡ºç™»å½•</a>
                    </div>
                </li>
            </ul>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- é¦–é¡µéƒ¨åˆ† -->
    <section id="home" class="section active">
        <div class="container">
            <div class="home-content">
                <h1 class="home-title">
                    ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="highlight">åˆ˜åŠ›è²</span>
                </h1>
                <h2 class="home-subtitle">æ­¦æ±‰ç†å·¥å¤§å­¦ Â· æ™ºèƒ½ç»æµä¸“ä¸š</h2>
                <p class="home-description">
                    æˆ‘æ˜¯ä¸€å19å²çš„å¤§å­¦ç”Ÿï¼Œå¯¹æ•°å­—ç»æµå’ŒAIåœ¨ç»æµä¸­çš„åº”ç”¨å……æ»¡çƒ­æƒ…ã€‚
                    æˆ‘æ“…é•¿æ•°æ®åˆ†æã€å•†ä¸šåˆ†æå’Œé€»è¾‘æ€ç»´ï¼Œå¯¹æ–°æŠ€æœ¯ã€æ–°ç»æµæ¨¡å¼ä¿æŒæ•é”çš„è§‚å¯ŸåŠ›ã€‚
                </p>
                <div class="home-buttons">
                    <a href="#about" class="btn btn-primary">äº†è§£æ›´å¤š</a>
                    <a href="#contact" class="btn btn-secondary">è”ç³»æˆ‘</a>
                </div>
                <div class="home-image">
                    <div class="floating-card">
                        <div class="card-icon">ğŸ“</div>
                        <h3>æ™ºèƒ½ç»æµ</h3>
                        <p>æ¢ç´¢AIä¸ç»æµçš„ç»“åˆ</p>
                    </div>
                    <div class="floating-card">
                        <div class="card-icon">ğŸ“Š</div>
                        <h3>æ•°æ®åˆ†æ</h3>
                        <p>ç”¨æ•°æ®æ´å¯Ÿç»æµè¶‹åŠ¿</p>
                    </div>
                    <div class="floating-card">
                        <div class="card-icon">ğŸŒ</div>
                        <h3>æ•°å­—ç»æµ</h3>
                        <p>ç ”ç©¶æ–°ç»æµæ¨¡å¼</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- å…³äºæˆ‘éƒ¨åˆ† -->
    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title">å…³äºæˆ‘</h2>
            <p class="section-subtitle">äº†è§£æˆ‘çš„åŸºæœ¬ä¿¡æ¯å’Œä¸“ä¸šèƒŒæ™¯</p>
            
            <div class="about-content">
                <div class="about-card">
                    <div class="about-icon">ğŸ‘¤</div>
                    <h3>ä¸ªäººä¿¡æ¯</h3>
                    <ul class="info-list">
                        <li><strong>å§“åï¼š</strong>åˆ˜åŠ›è²</li>
                        <li><strong>å¹´é¾„ï¼š</strong>19å²</li>
                        <li><strong>å­¦æ ¡ï¼š</strong>æ­¦æ±‰ç†å·¥å¤§å­¦</li>
                        <li><strong>ä¸“ä¸šï¼š</strong>æ™ºèƒ½ç»æµ</li>
                    </ul>
                </div>
                
                <div class="about-card">
                    <div class="about-icon">ğŸ¯</div>
                    <h3>ä¸“ä¸šæ–¹å‘</h3>
                    <ul class="info-list">
                        <li><strong>ç ”ç©¶é¢†åŸŸï¼š</strong>æ•°å­—ç»æµ</li>
                        <li><strong>å…´è¶£æ–¹å‘ï¼š</strong>AIåœ¨ç»æµä¸­çš„åº”ç”¨</li>
                        <li><strong>å­¦ä¹ é‡ç‚¹ï¼š</strong>å¹³å°ç»æµ</li>
                        <li><strong>å‘å±•ç›®æ ‡ï¼š</strong>æˆä¸ºç»æµåˆ†æå¸ˆ</li>
                    </ul>
                </div>
                
                <div class="about-card">
                    <div class="about-icon">ğŸ“§</div>
                    <h3>è”ç³»æ–¹å¼</h3>
                    <ul class="info-list">
                        <li><strong>é‚®ç®±ï¼š</strong>lifeiliu68@gmail.com</li>
                        <li><strong>åœ°å€ï¼š</strong>æ¹–åŒ—æ­¦æ±‰</li>
                        <li><strong>çŠ¶æ€ï¼š</strong>åœ¨è¯»æœ¬ç§‘</li>
                        <li><strong>æ—¶é—´ï¼š</strong>éšæ—¶æ¬¢è¿äº¤æµ</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- æŠ€èƒ½åˆ†æéƒ¨åˆ† -->
    <section id="skills" class="section">
        <div class="container">
            <h2 class="section-title">æŠ€èƒ½åˆ†æ</h2>
            <p class="section-subtitle">æˆ‘çš„ä¸“ä¸šæŠ€èƒ½å’Œå­¦ä¹ èƒ½åŠ›</p>
            
            <div class="skills-grid">
                <div class="skill-card" onclick="openSkillDetail('data-analysis')">
                    <div class="skill-icon">ğŸ</div>
                    <h3>æ•°æ®åˆ†æä¸ç»æµå»ºæ¨¡</h3>
                    <p>æŒæ¡Pythonç¼–ç¨‹åŸºç¡€ï¼Œèƒ½å¤Ÿè¿›è¡Œæ•°æ®æ¸…æ´—ã€åˆ†æå’Œå¯è§†åŒ–ã€‚ç†Ÿç»ƒä½¿ç”¨Excelè¿›è¡Œæ•°æ®å¤„ç†å’ŒåŸºç¡€ç»Ÿè®¡åˆ†æï¼Œå…·å¤‡ç»æµå»ºæ¨¡çš„åŸºæœ¬èƒ½åŠ›ã€‚</p>
                    <div class="skill-tags">
                        <span class="tag">Python</span>
                        <span class="tag">Excel</span>
                        <span class="tag">æ•°æ®åˆ†æ</span>
                    </div>
                    <div class="skill-view-btn">æŸ¥çœ‹è¯¦æƒ… â†’</div>
                </div>
                
                <div class="skill-card" onclick="openSkillDetail('ai-economics')">
                    <div class="skill-icon">ğŸ¤–</div>
                    <h3>AIåœ¨ç»æµä¸­çš„åº”ç”¨</h3>
                    <p>ç†è§£äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨ç»æµå­¦ä¸å•†ä¸šé¢†åŸŸçš„åº”ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬é¢„æµ‹åˆ†æã€æ™ºèƒ½æ¨èã€è‡ªåŠ¨åŒ–å†³ç­–ç­‰ï¼Œèƒ½å¤Ÿä»ç»æµè§’åº¦è¯„ä¼°AIæŠ€æœ¯çš„ä»·å€¼ã€‚</p>
                    <div class="skill-tags">
                        <span class="tag">äººå·¥æ™ºèƒ½</span>
                        <span class="tag">é¢„æµ‹åˆ†æ</span>
                        <span class="tag">è‡ªåŠ¨åŒ–å†³ç­–</span>
                    </div>
                    <div class="skill-view-btn">æŸ¥çœ‹è¯¦æƒ… â†’</div>
                </div>
                
                <div class="skill-card" onclick="openSkillDetail('digital-economy')">
                    <div class="skill-icon">ğŸŒ</div>
                    <h3>æ•°å­—ç»æµä¸å¹³å°ç»æµ</h3>
                    <p>ç†Ÿæ‚‰æ•°å­—ç»æµçš„åŸºæœ¬ç†è®ºå’Œå‘å±•è¶‹åŠ¿ï¼Œäº†è§£å¹³å°ç»æµçš„å•†ä¸šæ¨¡å¼å’Œè¿è¡Œæœºåˆ¶ï¼Œèƒ½å¤Ÿåˆ†ææ–°å…´ç»æµå½¢æ€çš„ç‰¹ç‚¹å’Œå½±å“ã€‚</p>
                    <div class="skill-tags">
                        <span class="tag">æ•°å­—ç»æµ</span>
                        <span class="tag">å¹³å°ç»æµ</span>
                        <span class="tag">å•†ä¸šæ¨¡å¼</span>
                    </div>
                    <div class="skill-view-btn">æŸ¥çœ‹è¯¦æƒ… â†’</div>
                </div>
                
                <div class="skill-card" onclick="openSkillDetail('business-analysis')">
                    <div class="skill-icon">ğŸ’¼</div>
                    <h3>å•†ä¸šåˆ†æä¸é€»è¾‘æ€ç»´</h3>
                    <p>å…·å¤‡è‰¯å¥½çš„å•†ä¸šåˆ†æèƒ½åŠ›ï¼Œèƒ½å¤Ÿè¿ç”¨é€»è¾‘æ€ç»´åˆ†æå¤æ‚çš„ç»æµé—®é¢˜ï¼Œè¯†åˆ«å…³é”®å› ç´ ï¼Œæå‡ºåˆç†çš„è§£å†³æ–¹æ¡ˆã€‚</p>
                    <div class="skill-tags">
                        <span class="tag">å•†ä¸šåˆ†æ</span>
                        <span class="tag">é€»è¾‘æ€ç»´</span>
                        <span class="tag">é—®é¢˜è§£å†³</span>
                    </div>
                    <div class="skill-view-btn">æŸ¥çœ‹è¯¦æƒ… â†’</div>
                </div>
                
                <div class="skill-card" onclick="openSkillDetail('information-collection')">
                    <div class="skill-icon">ğŸ“š</div>
                    <h3>ä¿¡æ¯æ”¶é›†ä¸æŠ¥å‘Šæ’°å†™</h3>
                    <p>æ“…é•¿ä¿¡æ¯æ”¶é›†ã€æ•°æ®æ•´ç†å’ŒæŠ¥å‘Šæ’°å†™ï¼Œèƒ½å¤Ÿä»å¤šä¸ªæ¸ é“è·å–ä¿¡æ¯ï¼Œè¿›è¡Œç³»ç»ŸåŒ–æ•´ç†ï¼Œå¹¶ä»¥æ¸…æ™°çš„æ–¹å¼å‘ˆç°åˆ†æç»“æœã€‚</p>
                    <div class="skill-tags">
                        <span class="tag">ä¿¡æ¯æ”¶é›†</span>
                        <span class="tag">æŠ¥å‘Šæ’°å†™</span>
                        <span class="tag">æ•°æ®åˆ†æ</span>
                    </div>
                    <div class="skill-view-btn">æŸ¥çœ‹è¯¦æƒ… â†’</div>
                </div>
                
                <div class="skill-card" onclick="openSkillDetail('learning-ability')">
                    <div class="skill-icon">ğŸš€</div>
                    <h3>å­¦ä¹ èƒ½åŠ›</h3>
                    <p>å¯¹æ–°æŠ€æœ¯ã€æ–°ç»æµæ¨¡å¼ä¿æŒæ•é”çš„è§‚å¯ŸåŠ›å’Œå¼ºçƒˆçš„å­¦ä¹ å…´è¶£ï¼Œèƒ½å¤Ÿå¿«é€Ÿé€‚åº”å˜åŒ–ï¼ŒæŒç»­æ›´æ–°çŸ¥è¯†ç»“æ„ã€‚</p>
                    <div class="skill-tags">
                        <span class="tag">å¿«é€Ÿå­¦ä¹ </span>
                        <span class="tag">é€‚åº”èƒ½åŠ›</span>
                        <span class="tag">çŸ¥è¯†æ›´æ–°</span>
                    </div>
                    <div class="skill-view-btn">æŸ¥çœ‹è¯¦æƒ… â†’</div>
                </div>
            </div>
        </div>
    </section>

    <!-- æ±‚å­¦ç»å†éƒ¨åˆ† -->
    <section id="timeline" class="section">
        <div class="container">
            <h2 class="section-title">æ±‚å­¦ç»å†</h2>
            <p class="section-subtitle">æˆ‘çš„å­¦ä¹ å†ç¨‹å’Œæˆé•¿è½¨è¿¹</p>
            
            <div class="timeline-container">
                <div class="timeline-line"></div>
                
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-year">2024 - è‡³ä»Š</div>
                        <h3>æ­¦æ±‰ç†å·¥å¤§å­¦</h3>
                        <div class="timeline-type">æœ¬ç§‘å­¦ä¹ </div>
                        <p class="timeline-description">
                            åœ¨æ­¦æ±‰ç†å·¥å¤§å­¦æ™ºèƒ½ç»æµä¸“ä¸šå­¦ä¹ ï¼Œç³»ç»Ÿå­¦ä¹ ç»æµå­¦ç†è®ºå’Œæ•°æ®åˆ†ææ–¹æ³•ã€‚
                            å‚ä¸å¤šä¸ªæ•°å­—ç»æµç›¸å…³é¡¹ç›®ç ”ç©¶ï¼Œæ·±å…¥äº†è§£AIæŠ€æœ¯åœ¨ç»æµé¢†åŸŸçš„åº”ç”¨ã€‚
                        </p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-year">2021 - 2024</div>
                        <h3>å®œæ˜Œå¸‚å¤·é™µä¸­å­¦</h3>
                        <div class="timeline-type">é«˜ä¸­é˜¶æ®µ</div>
                        <p class="timeline-description">
                            åœ¨å®œæ˜Œå¸‚å¤·é™µä¸­å­¦å…¨é¢å‘å±•ï¼Œç§¯æå‚ä¸å„ç±»å­¦ç§‘ç«èµ›å’Œç¤¾å›¢æ´»åŠ¨ã€‚
                            åŸ¹å…»äº†è‰¯å¥½çš„å­¦ä¹ ä¹ æƒ¯å’Œå›¢é˜Ÿåä½œèƒ½åŠ›ï¼Œä¸ºå¤§å­¦ä¸“ä¸šå­¦ä¹ æ‰“ä¸‹åšå®åŸºç¡€ã€‚
                        </p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-year">2018 - 2021</div>
                        <h3>å®œæ˜Œå¸‚é‡‘ä¸œæ–¹åˆçº§ä¸­å­¦</h3>
                        <div class="timeline-type">åˆä¸­é˜¶æ®µ</div>
                        <p class="timeline-description">
                            åœ¨å®œæ˜Œå¸‚é‡‘ä¸œæ–¹åˆçº§ä¸­å­¦å¯¹ç»æµå­¦å’Œè®¡ç®—æœºç§‘å­¦äº§ç”Ÿæµ“åšå…´è¶£ã€‚
                            å¼€å§‹è‡ªå­¦ç¼–ç¨‹åŸºç¡€å’Œç»æµå­¦å…¥é—¨çŸ¥è¯†ï¼ŒåŸ¹å…»äº†è‡ªå­¦èƒ½åŠ›å’Œåˆ›æ–°æ€ç»´ã€‚
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- å…´è¶£çˆ±å¥½éƒ¨åˆ† -->
    <section id="hobbies" class="section">
        <div class="container">
            <h2 class="section-title">å…´è¶£çˆ±å¥½</h2>
            <p class="section-subtitle">å­¦ä¹ ä¹‹ä½™çš„ç²¾å½©ç”Ÿæ´»</p>
            
            <div class="hobbies-content">
                <div class="hobby-card">
                    <div class="hobby-image">ğŸƒâ€â™‚ï¸</div>
                    <h3>è¿åŠ¨å¥èº«</h3>
                    <p>å–œæ¬¢è·‘æ­¥ã€æ¸¸æ³³ç­‰æœ‰æ°§è¿åŠ¨ï¼Œä¿æŒè‰¯å¥½çš„èº«ä½“ç´ è´¨ã€‚è¿åŠ¨è®©æˆ‘ä¿æŒæ´»åŠ›ï¼Œæé«˜å­¦ä¹ æ•ˆç‡ï¼Œä¹Ÿæ˜¯é‡Šæ”¾å‹åŠ›çš„å¥½æ–¹å¼ã€‚</p>
                    <button class="btn-view-photos" onclick="toggleTravelPhotos()">
                        <span class="btn-icon">ğŸ“·</span>
                        æŸ¥çœ‹è¿åŠ¨ç…§ç‰‡
                    </button>
                    <div id="travelPhotosSection" class="travel-photos-section" style="display: none;">
                        <div class="travel-photos-header">
                            <h3>è¿åŠ¨ç…§ç‰‡</h3>
                            <button class="btn-close-photos" onclick="toggleTravelPhotos()">Ã—</button>
                        </div>
                        <div class="travel-upload-area" id="travelUploadArea">
                            <div class="travel-upload-content">
                                <div class="travel-upload-icon">ğŸ“¤</div>
                                <h3>ä¸Šä¼ è¿åŠ¨ç…§ç‰‡</h3>
                                <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </p>
                                <p class="travel-upload-hint">æ”¯æŒ JPGã€PNGã€GIF æ ¼å¼ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 5MB</p>
                                <button type="button" class="btn btn-primary" onclick="document.getElementById('travelFileInput').click()">é€‰æ‹©æ–‡ä»¶</button>
                                <input type="file" id="travelFileInput" style="display: none;" accept="image/*" multiple>
                            </div>
                        </div>
                        <div class="travel-photos-grid" id="travelPhotosGrid">
                            <div class="travel-photos-empty" id="travelPhotosEmpty">è¿˜æ²¡æœ‰ç…§ç‰‡ï¼Œå¿«æ¥ä¸Šä¼ ç¬¬ä¸€å¼ å§ï¼</div>
                        </div>
                    </div>
                </div>
                
                <div class="hobby-card">
                    <div class="hobby-image">ğŸ®</div>
                    <h3>æ¸¸æˆå¨±ä¹</h3>
                    <p>å–œæ¬¢å„ç±»æ¸¸æˆï¼Œä»ç­–ç•¥æ¸¸æˆåˆ°åŠ¨ä½œå†’é™©éƒ½æœ‰æ¶‰çŒã€‚æ¸¸æˆä¸ä»…æ˜¯ä¸€ç§å¨±ä¹ï¼Œä¹Ÿæ˜¯ä¸€ç§æ€ç»´è®­ç»ƒå’Œç¤¾äº¤æ–¹å¼ã€‚</p>
                    <button class="btn-view-photos" onclick="toggleAnimeCollection()">
                        <span class="btn-icon">ğŸ¨</span>
                        æ¸¸æˆæ”¶è—
                    </button>
                    <div id="animeCollectionSection" class="anime-collection-section" style="display: none;">
                        <div class="anime-collection-header">
                            <h3>æ¸¸æˆæ”¶è—</h3>
                            <button class="btn-close-photos" onclick="toggleAnimeCollection()">Ã—</button>
                        </div>
                        <div class="anime-add-area">
                            <div class="anime-add-content">
                                <h4>æ·»åŠ æ¸¸æˆæ”¶è—</h4>
                                <div class="anime-form">
                                    <div class="form-group">
                                        <label for="animeTypeInput">æ¸¸æˆç±»å‹/åç§°</label>
                                        <input type="text" id="animeTypeInput" class="form-input" placeholder="ä¾‹å¦‚ï¼šRPGã€ç­–ç•¥ã€å°„å‡»ç­‰">
                                    </div>
                                    <div class="form-group">
                                        <label>æ¸¸æˆæˆªå›¾</label>
                                        <div class="anime-upload-area" id="animeUploadArea">
                                            <div class="anime-upload-content">
                                                <div class="anime-upload-icon">ğŸ“¤</div>
                                                <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ¸¸æˆæˆªå›¾åˆ°æ­¤å¤„</p>
                                                <p class="anime-upload-hint">æ”¯æŒ JPGã€PNGã€GIF æ ¼å¼ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 5MB</p>
                                                <button type="button" class="btn btn-primary" onclick="document.getElementById('animeFileInput').click()">é€‰æ‹©æ–‡ä»¶</button>
                                                <input type="file" id="animeFileInput" style="display: none;" accept="image/*">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-secondary" onclick="clearAnimeForm()">æ¸…ç©º</button>
                                        <button type="button" class="btn btn-primary" onclick="addAnimeItem()">æ·»åŠ æ”¶è—</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="anime-collection-grid" id="animeCollectionGrid">
                            <div class="anime-collection-empty" id="animeCollectionEmpty">è¿˜æ²¡æœ‰æ”¶è—ï¼Œå¿«æ¥æ·»åŠ ç¬¬ä¸€ä¸ªå§ï¼</div>
                        </div>
                    </div>
                </div>
                
                <div class="hobby-card">
                    <div class="hobby-image">ğŸ“–</div>
                    <h3>é˜…è¯»å­¦ä¹ </h3>
                    <p>çƒ­çˆ±é˜…è¯»å„ç±»ä¹¦ç±ï¼Œç‰¹åˆ«æ˜¯ç»æµå­¦ã€ç§‘æŠ€å’Œå¿ƒç†å­¦ç›¸å…³å†…å®¹ã€‚é€šè¿‡é˜…è¯»ä¸æ–­æ‹“å±•çŸ¥è¯†é¢ï¼Œæé«˜æ€ç»´æ·±åº¦ã€‚</p>
                </div>
                
                <div class="hobby-card">
                    <div class="hobby-image">ğŸ¬</div>
                    <h3>ç”µå½±æ¬£èµ</h3>
                    <p>å–œæ¬¢è§‚çœ‹å„ç±»ç”µå½±ï¼Œä»ç§‘å¹»åˆ°æ–‡è‰ºç‰‡éƒ½æœ‰æ¶‰çŒã€‚ç”µå½±æ˜¯ç†è§£äººæ€§å’Œç¤¾ä¼šçš„å¥½çª—å£ï¼Œä¹Ÿæ˜¯æ”¾æ¾èº«å¿ƒçš„å¥½æ–¹å¼ã€‚</p>
                </div>
                
                <div class="hobby-card">
                    <div class="hobby-image">ğŸµ</div>
                    <h3>éŸ³ä¹è†å¬</h3>
                    <p>å–œæ¬¢å¤šç§é£æ ¼çš„éŸ³ä¹ï¼Œä»å¤å…¸åˆ°æµè¡Œéƒ½æœ‰æ¶‰çŒã€‚éŸ³ä¹æ˜¯ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ï¼Œèƒ½å¤Ÿè°ƒèŠ‚æƒ…ç»ªï¼Œæé«˜å·¥ä½œå’Œå­¦ä¹ æ•ˆç‡ã€‚</p>
                </div>
                
                <div class="hobby-card">
                    <div class="hobby-image">ğŸ’¬</div>
                    <h3>ç¤¾äº¤äº¤æµ</h3>
                    <p>å–œæ¬¢ä¸æœ‹å‹äº¤æµï¼Œå‚åŠ å„ç§ç¤¾äº¤æ´»åŠ¨ã€‚é€šè¿‡ä¸ä¸åŒèƒŒæ™¯çš„äººäº¤æµï¼Œæ‹“å®½è§†é‡ï¼Œä¸°å¯Œäººç”Ÿç»å†ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ç…§ç‰‡å¢™éƒ¨åˆ† -->
    <section id="gallery" class="section">
        <div class="container">
            <h2 class="section-title">ç…§ç‰‡å¢™</h2>
            <p class="section-subtitle">è®°å½•ç¾å¥½ç¬é—´ï¼Œåˆ†äº«ç²¾å½©ç”Ÿæ´»</p>
            
            <div class="gallery-upload-area" id="uploadArea">
                <div class="upload-content">
                    <div class="upload-icon">ğŸ“·</div>
                    <h3>ä¸Šä¼ ç…§ç‰‡</h3>
                    <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </p>
                    <p class="upload-hint">æ”¯æŒ JPGã€PNGã€GIF æ ¼å¼ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 5MBï¼Œå¯æ‰¹é‡ä¸Šä¼ </p>
                    <button type="button" class="btn btn-primary" onclick="document.getElementById('fileInput').click()">é€‰æ‹©æ–‡ä»¶</button>
                    <input type="file" id="fileInput" style="display: none;" accept="image/*" multiple>
                </div>
            </div>
            
            <div class="gallery-grid" id="galleryGrid">
                <div class="gallery-empty" id="galleryEmpty">è¿˜æ²¡æœ‰ç…§ç‰‡ï¼Œå¿«æ¥ä¸Šä¼ ç¬¬ä¸€å¼ å§ï¼</div>
            </div>
        </div>
    </section>

    <!-- è”ç³»æ–¹å¼éƒ¨åˆ† -->
    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">è”ç³»æ–¹å¼</h2>
            <p class="section-subtitle">æ¬¢è¿ä¸æˆ‘äº¤æµï¼Œå…±åŒæ¢è®¨å­¦æœ¯ä¸ç”Ÿæ´»</p>
            
            <div class="contact-content">
                <div class="contact-card">
                    <div class="contact-icon">ğŸ“§</div>
                    <h3>ç”µå­é‚®ä»¶</h3>
                    <a href="mailto:lifeiliu68@gmail.com">lifeiliu68@gmail.com</a>
                </div>
                
                <div class="contact-card">
                    <div class="contact-icon">ğŸ“±</div>
                    <h3>ç¤¾äº¤åª’ä½“</h3>
                    <p>å¾®ä¿¡: wechat_lifeliu</p>
                </div>
                
                <div class="contact-card">
                    <div class="contact-icon">ğŸ«</div>
                    <h3>å­¦æ ¡åœ°å€</h3>
                    <p>æ­¦æ±‰ç†å·¥å¤§å­¦<br>æ¹–åŒ—çœæ­¦æ±‰å¸‚</p>
                </div>
                
                <div class="contact-card">
                    <div class="contact-icon">ğŸ’¼</div>
                    <h3>ä¸“ä¸šåˆä½œ</h3>
                    <p>æ¬¢è¿æ•°å­—ç»æµã€AIåº”ç”¨ç­‰é¢†åŸŸçš„å­¦æœ¯äº¤æµä¸åˆä½œ</p>
                </div>
            </div>
            
            <div class="contact-message">
                <p>æ„Ÿè°¢æ‚¨è®¿é—®æˆ‘çš„ä¸ªäººç½‘ç«™ï¼å¦‚æœæ‚¨å¯¹æˆ‘çš„ç ”ç©¶å†…å®¹æˆ–èƒŒæ™¯æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…å¸Œæœ›è¿›è¡Œå­¦æœ¯äº¤æµï¼Œæ¬¢è¿éšæ—¶è”ç³»æˆ‘ã€‚</p>
                <p>æœŸå¾…ä¸æ‚¨è§é¢ï¼Œå…±åŒæ¢è®¨ç»æµå­¦ä¸ç§‘æŠ€çš„ç»“åˆç‚¹ï¼Œä¸€èµ·æ¢ç´¢æ•°å­—ç»æµçš„æ–°å¯èƒ½ã€‚</p>
            </div>
        </div>
    </section>

    <!-- ç•™è¨€æ¿éƒ¨åˆ† -->
    <section id="guestbook" class="section">
        <div class="container">
            <h2 class="section-title">è®¿å®¢ç•™è¨€</h2>
            <p class="section-subtitle">æ¬¢è¿ç•™ä¸‹æ‚¨çš„å®è´µæ„è§å’Œå»ºè®®</p>
            
            <div class="guestbook-container">
                <!-- ç•™è¨€è¡¨å• -->
                <div class="guestbook-form" id="guestbookFormContainer">
                    <h3 style="margin-bottom: 1.5rem; color: var(--text-color);">å‘è¡¨ç•™è¨€</h3>
                    <form id="messageForm">
                        <div class="form-group">
                            <label for="visitorName">æ‚¨çš„å§“å</label>
                            <input type="text" id="visitorName" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="visitorPhone">è”ç³»ç”µè¯</label>
                            <input type="tel" id="visitorPhone" placeholder="è¯·è¾“å…¥æ‚¨çš„è”ç³»ç”µè¯" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="messageContent">ç•™è¨€å†…å®¹</label>
                            <textarea id="messageContent" placeholder="è¯·è¾“å…¥æ‚¨çš„ç•™è¨€å†…å®¹..." maxlength="500" required></textarea>
                            <div class="character-count">
                                <span id="charCount">0</span> / 500 å­—
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" id="submitBtn" class="btn-primary">å‘å¸ƒç•™è¨€</button>
                            <div id="formMessage" class="form-message"></div>
                        </div>
                    </form>
                </div>
                
                <!-- ç•™è¨€åˆ—è¡¨ -->
                <div class="guestbook-messages">
                    <div class="messages-header">
                        <h3>è®¿å®¢ç•™è¨€</h3>
                        <div class="message-count" id="messageCount">å…± 0 æ¡ç•™è¨€</div>
                    </div>
                    
                    <div class="message-list" id="messageList">
                        <div id="loadingMessages" style="text-align: center; padding: 2rem; color: var(--text-light);">
                            <p>æ­£åœ¨åŠ è½½ç•™è¨€...</p>
                        </div>
                    </div>
                    
                    <div class="empty-messages" id="emptyMessages" style="display: none;">
                        <div class="empty-icon">ğŸ“</div>
                        <p>æš‚æ— ç•™è¨€ï¼Œå¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡ç•™è¨€å§ï¼</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2023 åˆ˜åŠ›è²çš„ä¸ªäººç½‘ç«™. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
        </div>
    </footer>

    <!-- æŠ€èƒ½è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="skillDetailModal" class="skill-detail-modal">
        <div class="skill-detail-content">
            <div class="skill-detail-header">
                <div class="skill-detail-title">
                    <span id="skillDetailIcon"></span>
                    <h2 id="skillDetailTitle"></h2>
                </div>
                <button class="skill-detail-close" onclick="closeSkillDetail()">Ã—</button>
            </div>
            <div class="skill-detail-body">
                <div id="skillDetailDescription" class="skill-detail-description"></div>
                
                <div class="skill-project-add-area">
                    <h3>æ·»åŠ é¡¹ç›®å±•ç¤º</h3>
                    <div class="skill-project-form">
                        <div class="form-group">
                            <label for="projectNameInput">é¡¹ç›®åç§°</label>
                            <input type="text" id="projectNameInput" class="form-input" placeholder="è¾“å…¥é¡¹ç›®åç§°">
                        </div>
                        <div class="form-group">
                            <label for="projectDescInput">é¡¹ç›®æè¿°</label>
                            <textarea id="projectDescInput" class="form-textarea" placeholder="ç®€è¦æè¿°é¡¹ç›®å†…å®¹" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label>é¡¹ç›®æ–‡ä»¶</label>
                            <div class="skill-project-upload-area" id="skillProjectUploadArea">
                                <div class="skill-project-upload-content">
                                    <div class="skill-project-upload-icon">ğŸ“</div>
                                    <p>ç‚¹å‡»é€‰æ‹©æˆ–æ‹–æ‹½æ–‡ä»¶</p>
                                    <p class="skill-project-upload-hint">æ”¯æŒå›¾ç‰‡ã€PDFã€æ–‡æ¡£ç­‰ï¼ˆCtrl+Vç²˜è´´å›¾ç‰‡ï¼‰</p>
                                    <button type="button" class="btn btn-primary" id="selectFileBtn" onclick="triggerSkillFileSelect(); return false;">
                                        é€‰æ‹©æ–‡ä»¶
                                    </button>
                                    <input type="file" id="skillProjectFileInput" style="display: none;" accept="image/*,.pdf,.doc,.docx,.txt" multiple>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="addSkillProject()">æ·»åŠ é¡¹ç›®</button>
                    </div>
                </div>
                
                <div class="skill-projects-section">
                    <h3>ç›¸å…³é¡¹ç›®å±•ç¤º</h3>
                    <div class="skill-projects-grid" id="skillProjectsGrid">
                        <div class="skill-projects-empty" id="skillProjectsEmpty">è¿˜æ²¡æœ‰é¡¹ç›®å±•ç¤ºï¼Œå¿«æ¥æ·»åŠ ç¬¬ä¸€ä¸ªå§ï¼</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // ç™»å½•çŠ¶æ€æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', () => {
            checkLoginStatus();
        });

        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        async function checkLoginStatus() {
            console.log('å¼€å§‹æ£€æŸ¥ç™»å½•çŠ¶æ€...');
            const visitorInfo = localStorage.getItem('visitorInfo');
            const overlay = document.getElementById('loginCheckOverlay');
            
            if (!visitorInfo) {
                console.log('æœªæ‰¾åˆ°è®¿å®¢ä¿¡æ¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢');
                // æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
                return;
            }
            
            try {
                console.log('æ‰¾åˆ°è®¿å®¢ä¿¡æ¯ï¼ŒéªŒè¯token...', visitorInfo);
                // æ˜¾ç¤ºéªŒè¯é®ç½©
                overlay.style.display = 'flex';
                
                const { token, name } = JSON.parse(visitorInfo);
                
                // éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ
                const response = await fetch('/api/verify', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ token })
                });
                
                if (response.ok) {
                    console.log('TokenéªŒè¯æˆåŠŸï¼Œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯');
                    // å·²ç™»å½•ï¼Œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
                    const loginLink = document.getElementById('loginLink');
                    loginLink.textContent = `æ¬¢è¿, ${name}`;
                    loginLink.removeAttribute('href');
                    loginLink.style.cursor = 'pointer';
                    loginLink.onclick = toggleUserDropdown;

                    // æ˜¾ç¤ºæ¬¢è¿æ–‡æœ¬
                    document.getElementById('welcomeText').textContent = `ä½ å¥½ï¼Œ${name}`;

                    // éšè—éªŒè¯é®ç½©
                    overlay.style.display = 'none';
                } else {
                    console.log('TokenéªŒè¯å¤±è´¥ï¼Œæ¸…é™¤æœ¬åœ°å­˜å‚¨');
                    // tokenæ— æ•ˆï¼Œæ¸…é™¤æœ¬åœ°å­˜å‚¨å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢
                    localStorage.removeItem('visitorInfo');
                    window.location.href = '/login.html';
                }
            } catch (error) {
                console.error('éªŒè¯ç™»å½•çŠ¶æ€å¤±è´¥:', error);
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢
                localStorage.removeItem('visitorInfo');
                window.location.href = '/login.html';
            }
        }

        // åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰èœå•
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                localStorage.removeItem('visitorInfo');
                sessionStorage.removeItem('authToken');
                
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });


        // ç•™è¨€æ¿åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–ç•™è¨€æ¿åŠŸèƒ½
            initializeGuestbook();
        });

        // åˆå§‹åŒ–ç•™è¨€æ¿
        function initializeGuestbook() {
            console.log('åˆå§‹åŒ–ç•™è¨€æ¿åŠŸèƒ½...');
            
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            const visitorInfo = localStorage.getItem('visitorInfo');
            
            if (!visitorInfo) {
                console.log('æœªç™»å½•ï¼Œéšè—ç•™è¨€è¡¨å•');
                // éšè—ç•™è¨€è¡¨å•
                const formContainer = document.getElementById('guestbookFormContainer');
                if (formContainer) {
                    formContainer.style.display = 'none';
                }
                
                // æ˜¾ç¤ºç™»å½•æç¤º
                const guestbookContainer = document.querySelector('.guestbook-container');
                if (guestbookContainer) {
                    const loginPrompt = document.createElement('div');
                    loginPrompt.className = 'login-prompt';
                    loginPrompt.innerHTML = `
                        <div class="login-prompt-content">
                            <h3>è¯·å…ˆç™»å½•</h3>
                            <p>æ‚¨éœ€è¦ç™»å½•åæ‰èƒ½å‘è¡¨ç•™è¨€</p>
                            <a href="/login.html" class="btn-primary">ç«‹å³ç™»å½•</a>
                        </div>
                    `;
                    loginPrompt.style.padding = '2rem';
                    loginPrompt.style.textAlign = 'center';
                    loginPrompt.style.background = 'rgba(74, 144, 226, 0.1)';
                    loginPrompt.style.borderRadius = '15px';
                    loginPrompt.style.marginBottom = '2rem';
                    
                    guestbookContainer.insertBefore(loginPrompt, guestbookContainer.firstChild);
                }
            } else {
                console.log('å·²ç™»å½•ï¼Œè®¾ç½®è®¿å®¢ä¿¡æ¯åˆ°è¡¨å•');
                try {
                    const { name, phone } = JSON.parse(visitorInfo);
                    
                    // è®¾ç½®è®¿å®¢ä¿¡æ¯åˆ°è¡¨å•
                    const nameInput = document.getElementById('visitorName');
                    const phoneInput = document.getElementById('visitorPhone');
                    
                    if (nameInput) nameInput.value = name || '';
                    if (phoneInput) phoneInput.value = phone || '';
                    
                    // ç»‘å®šè¡¨å•æäº¤äº‹ä»¶
                    const messageForm = document.getElementById('messageForm');
                    if (messageForm) {
                        messageForm.addEventListener('submit', handleFormSubmit);
                    }
                    
                    // ç»‘å®šæ–‡æœ¬æ¡†å­—æ•°ç»Ÿè®¡
                    const messageContent = document.getElementById('messageContent');
                    if (messageContent) {
                        messageContent.addEventListener('input', updateCharacterCount);
                    }
                } catch (error) {
                    console.error('è·å–è®¿å®¢ä¿¡æ¯å¤±è´¥:', error);
                }
            }
            
            // åŠ è½½ç•™è¨€åˆ—è¡¨
            loadMessages();
        }
        
        // æ›´æ–°å­—æ•°ç»Ÿè®¡
        function updateCharacterCount() {
            const content = document.getElementById('messageContent').value;
            const charCount = content.length;
            document.getElementById('charCount').textContent = charCount;
        }
        
        // å¤„ç†è¡¨å•æäº¤
        async function handleFormSubmit(e) {
            e.preventDefault();
            
            const visitorInfo = localStorage.getItem('visitorInfo');
            if (!visitorInfo) {
                showFormMessage('è¯·å…ˆç™»å½•', 'error');
                return;
            }
            
            const { name, phone } = JSON.parse(visitorInfo);
            const content = document.getElementById('messageContent').value.trim();
            
            if (!content) {
                showFormMessage('è¯·è¾“å…¥ç•™è¨€å†…å®¹', 'error');
                return;
            }
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner"></span>æ­£åœ¨å‘å¸ƒ...';
            
            try {
                console.log('å‘é€ç•™è¨€è¯·æ±‚...');
                console.log('è¯·æ±‚æ•°æ®:', {
                    visitorName: name,
                    visitorPhone: phone,
                    content: content
                });
                
                const response = await fetch('/api/guestbook/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        visitorName: name,
                        visitorPhone: phone,
                        content: content
                    })
                });
                
                console.log('å“åº”çŠ¶æ€:', response.status, response.statusText);
                
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status} ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('ç•™è¨€å“åº”:', data);
                
                if (data.success) {
                    // æ¸…ç©ºè¡¨å•
                    document.getElementById('messageContent').value = '';
                    updateCharacterCount();
                    
                    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                    showFormMessage('ç•™è¨€å‘å¸ƒæˆåŠŸï¼', 'success');
                    
                    // é‡æ–°åŠ è½½ç•™è¨€åˆ—è¡¨
                    loadMessages();
                } else {
                    showFormMessage(data.message || 'å‘å¸ƒç•™è¨€å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                }
            } catch (error) {
                console.error('å‘å¸ƒç•™è¨€é”™è¯¯:', error);
                console.error('é”™è¯¯è¯¦æƒ…:', error.message);
                
                // æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†
                if (error.message.includes('NetworkError') || error.message.includes('Failed to fetch')) {
                    showFormMessage('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®', 'error');
                } else if (error.message.includes('HTTPé”™è¯¯')) {
                    showFormMessage('æœåŠ¡å™¨é”™è¯¯ï¼š' + error.message, 'error');
                } else {
                    showFormMessage('å‘é€ç•™è¨€æ—¶å‘ç”Ÿé”™è¯¯ï¼š' + error.message, 'error');
                }
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        }

        // åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰èœå•
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                localStorage.removeItem('visitorInfo');
                sessionStorage.removeItem('authToken');
                
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        
        // æ˜¾ç¤ºè¡¨å•æ¶ˆæ¯
        function showFormMessage(text, type) {
            const messageElement = document.getElementById('formMessage');
            if (messageElement) {
                messageElement.textContent = text;
                messageElement.className = `form-message ${type}`;
                messageElement.style.display = 'block';
                
                // 5ç§’åè‡ªåŠ¨éšè—
                setTimeout(() => {
                    messageElement.style.display = 'none';
                }, 5000);
            }
        }

        // åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰èœå•
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                localStorage.removeItem('visitorInfo');
                sessionStorage.removeItem('authToken');
                
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        
        // åŠ è½½ç•™è¨€åˆ—è¡¨
        async function loadMessages() {
            console.log('åŠ è½½ç•™è¨€åˆ—è¡¨...');
            showLoading(true);
            
            try {
                console.log('å‘é€åŠ è½½ç•™è¨€è¯·æ±‚...');
                const response = await fetch('/api/guestbook/messages');
                console.log('å“åº”çŠ¶æ€:', response.status, response.statusText);
                
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status} ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('ç•™è¨€æ•°æ®:', data);
                
                if (data.success) {
                    displayMessages(data.messages);
                    updateMessageCount(data.messages.length);
                } else {
                    console.error('åŠ è½½ç•™è¨€å¤±è´¥:', data.message);
                    showEmptyMessages();
                }
            } catch (error) {
                console.error('åŠ è½½ç•™è¨€é”™è¯¯:', error);
                console.error('é”™è¯¯è¯¦æƒ…:', error.message);
                showEmptyMessages();
                
                // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ç»™ç”¨æˆ·
                const messageList = document.getElementById('messageList');
                if (messageList) {
                    messageList.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: var(--primary-color);">
                            <p>åŠ è½½ç•™è¨€å¤±è´¥: ${error.message}</p>
                            <button onclick="loadMessages()" class="btn-primary" style="margin-top: 1rem;">é‡è¯•</button>
                        </div>
                    `;
                }
            } finally {
                showLoading(false);
            }
        }

        // åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰èœå•
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                localStorage.removeItem('visitorInfo');
                sessionStorage.removeItem('authToken');
                
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        
        // æ˜¾ç¤ºç•™è¨€åˆ—è¡¨
        function displayMessages(messages) {
            const messageList = document.getElementById('messageList');
            const emptyMessages = document.getElementById('emptyMessages');
            const loadingMessages = document.getElementById('loadingMessages');
            
            if (!messageList) return;
            
            // ç§»é™¤åŠ è½½æç¤º
            if (loadingMessages) {
                loadingMessages.remove();
            }
            
            if (!messages || messages.length === 0) {
                showEmptyMessages();
                return;
            }
            
            if (emptyMessages) emptyMessages.style.display = 'none';
            
            // æŒ‰æ—¶é—´å€’åºæ’åºï¼ˆæœ€æ–°çš„åœ¨ä¸Šé¢ï¼‰
            messages.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            messageList.innerHTML = '';
            
            messages.forEach(message => {
                const messageCard = createMessageCard(message);
                messageList.appendChild(messageCard);
            });
        }
        
        // åˆ›å»ºç•™è¨€å¡ç‰‡
        function createMessageCard(message) {
            const card = document.createElement('div');
            card.className = 'message-card';
            
            const date = new Date(message.createdAt);
            const formattedDate = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
            
            // åˆ›å»ºå¤´åƒï¼ˆä½¿ç”¨è®¿å®¢å§“åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼‰
            const avatarChar = message.visitorName ? message.visitorName.charAt(0).toUpperCase() : 'è®¿';
            
            card.innerHTML = `
                <div class="message-header">
                    <div class="message-info">
                        <div class="message-avatar">${avatarChar}</div>
                        <div>
                            <div class="message-name">${message.visitorName || 'åŒ¿åè®¿å®¢'}</div>
                            <div class="message-contact">${message.visitorPhone || ''}</div>
                        </div>
                    </div>
                    <div class="message-time">${formattedDate}</div>
                </div>
                <div class="message-content">${escapeHtml(message.content)}</div>
            `;
            
            return card;
        }
        
        // æ˜¾ç¤ºç©ºç•™è¨€æç¤º
        function showEmptyMessages() {
            const messageList = document.getElementById('messageList');
            const emptyMessages = document.getElementById('emptyMessages');
            const loadingMessages = document.getElementById('loadingMessages');
            
            if (!messageList || !emptyMessages) return;
            
            // ç§»é™¤åŠ è½½æç¤º
            if (loadingMessages) {
                loadingMessages.remove();
            }
            
            messageList.innerHTML = '';
            emptyMessages.style.display = 'block';
            updateMessageCount(0);
        }
        
        // æ›´æ–°ç•™è¨€æ•°é‡
        function updateMessageCount(count) {
            const messageCount = document.getElementById('messageCount');
            if (messageCount) {
                messageCount.textContent = `å…± ${count} æ¡ç•™è¨€`;
            }
        }

        // åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰èœå•
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                localStorage.removeItem('visitorInfo');
                sessionStorage.removeItem('authToken');
                
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        
        // æ˜¾ç¤º/éšè—åŠ è½½é®ç½©
        function showLoading(show) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            if (loadingOverlay) {
                loadingOverlay.style.display = show ? 'flex' : 'none';
            }
        }

        // åˆ‡æ¢ç”¨æˆ·ä¸‹æ‹‰èœå•
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                // æ¸…é™¤æœ¬åœ°å­˜å‚¨
                localStorage.removeItem('visitorInfo');
                sessionStorage.removeItem('authToken');
                
                // è·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '/login.html';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        
        // HTMLè½¬ä¹‰
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            
            return text.replace(/[&<>"']/g, m => map[m]);
        }
    </script>
</body>
</html>